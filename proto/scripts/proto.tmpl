{{if .__proto}}// Code generated by mid2proto. DO NOT EDIT.
// source repo: {{.source_repo}}
// {{toString now | noescape }}
{{$desc := splitList "\n" .description}}{{range $desc}}
// {{.}}{{end}}

syntax = "proto3";
package {{.package}}; //v{{.major_version}}

// Options {{ range $key, $proto := .__proto.options }}
option {{$proto.key}} = "{{$proto.value}}";{{ end }}

// Imports {{ range $key, $import := .__proto.imports }}
import "{{$import}}";{{ end }}

// Services
{{ range $key, $service := .services }}{{$desc := splitList "\n" $service.description}}{{range $desc}}
//{{.}}{{end}}
service {{$service.name}} {{"{"}}{{ range $key, $method := $service.methods}}{{$desc := splitList "\n" $method.description}}{{range $desc}}
    //{{.}}{{end}}
    rpc {{$method.name}} ({{$method.input_type}}) returns ({{$method.output_type}}) {{"{"}}{{if $method.options}}{{ range $key, $option := $method.options }}
        option ({{$option.name}}) = {{"{"}}{{range $key, $var := $option.vars }}
            {{$var.key}}: "{{$var.value}}"{{end}}
        {{"}"}};{{end}}{{end}}
    {{"}"}}{{end}}
{{"}"}}
{{end}}{{end}}{{if .enum_types}}{{ range $key, $enum := .enum_types }}{{$desc := splitList "\n" $enum.description}}{{range $desc}}
//{{.}}{{end}}
enum {{$enum.name}} {{"{"}}{{ range $key, $field := $enum.value }}
    {{$field.name | upper}} = {{$field.number}}; //{{$field.description}}{{ end }}
}{{ end }}{{ end }}{{if .types}}
{{ range $key, $type := .types }}{{$desc := splitList "\n" $type.description}}{{range $desc}}
//{{.}}{{end}}
message {{$type.name}} {{"{"}}{{ range $key, $field := $type.fields }}{{$desc := splitList "\n" $field.description}}{{range $desc}}
    //{{.}}{{end}}
    {{if $field.repeated}}repeated {{end}}{{$field.__proto.type}} {{$field.name}} = {{$field.__proto.number}}{{if $field.__proto.options}} [{{ range $key, $option := $field.__proto.options }}({{$option.name}}) = "{{$option.key}}:\"{{$option.value}}\""{{end}}]{{end}};{{end}}
}
{{ end }}{{ end }}