// Code generated by mid2proto. DO NOT EDIT.
// source repo: github.com/veith/golang-polymer-grpc-example-todo
// 2019-01-10 11:37:50.386091 +0100 CET m=+0.003553671

// Authentifizierungs-Service um sich einzuloggen.
// Der Aufrufer bekommt einen JWT Token.

syntax = "proto3";
package example.package; //v1

// Options 
option go_package = "auth";

// Imports 
import "google/api/annotations.proto";
import "google/protobuf/empty.proto";
import "github.com/gogo/protobuf/gogoproto/gogo.proto";

// Services

//Bis jetzt sind Login und Logout implememtiert. Ein Ändern des Kennworts könnte ebenfalls implementiert werden.
service AuthService {
    //Ausloggen, setzt nur den cookie auf leer, kann später die jwt.id revoken
    rpc Logout (google.protobuf.Empty) returns (google.protobuf.Empty) {
        option (google.api.http) = {
            delete: "/auth"
        };
    }
    //Der Login setzt Header und Cookies, darum kein Body in der Antwort.
    //Falls du ein Profil erwartest, sollte dies über ProfileServices angeboten werden.
    rpc Login (CredentialsRequest) returns (google.protobuf.Empty) {
        option (google.api.http) = {
            post: "/auth"
            body: "credentials"
        };
    }
}


//Allgemeine Anmeldeinformationen
message Credentials {
    //Der eindeutige Name des Benutzers.
    //Könnte auch die emailadresse sein
    string username = 1;
    //Das Kennwort des Benutzers
    string password = 2;
    //not-implemented
    //Der zweite Faktor.
    //Könnte TOPT Verfahren sein.
    string secondFactor = 3;
}

//Benutzer Credentials mit ID
message User {
    //Die ulid des Benutzers
    string id = 1 [(gogoproto.moretags) = "db:\"id,pk,omitempty\""];
    //Der _neue_ Benutzername
    string username = 2 [(gogoproto.moretags) = "db:\"username,omitempty\""];
    //Das _neue_ Kennwort des Benutzers
    string password = 3 [(gogoproto.moretags) = "db:\"password,omitempty\""];
}

//Request Daten für die Anmeldung
message CredentialsRequest {
    //enthält im mindesten:  username &amp;&amp; (password || secondFactor)
    Credentials credentials = 1;
}
